version: 1.0
description: A workflow to perform service state alert remediation
input:
  - data
vars:
  - sources: null
tasks:
  parsealert:
      action: uem_stackstorm.parse_service_state_alert
      input:
        alertBody: <% ctx().data %>
      next:
      - when: <% succeeded() %>
        publish: 
          - sources: <% result() %>
        do: startservice

  startservice:
      with: message in <% ctx().sources %>
      action: core.echo message=<% item(message) %>